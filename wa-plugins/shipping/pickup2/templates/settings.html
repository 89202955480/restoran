
{literal}
<style>
    .points_block{
        margin: 10px 0 0 0;
    }
    table.zebra .point a{
        display: inline-block;
    }
    .point{
        margin: 5px 0 0 25px;
    }

    table.zebra a.inline{
        margin-left: 20px;
    }
</style>
<script>
    $( document ).ready(function() {
        $(".add_point").click(function(){
            var container = $(this).parents(".points_block");
            var address = prompt("Укажите адрес пункта самовывоза");
            var code = container.data('code');
            var point_id = container.data('points')+1;
            if(address){
                var html = "<div class='point'>";
                html += address;
                html += "<input type='hidden' name='shipping[settings][regions]["+code+"][points]["+point_id+"]' value='"+address+"'>";
                html += " <a class='delete_point' href='#'><i class='icon16 delete'></i></a>";
                html += "</div>";
                container.find('.points').append(html);
                container.data('points', point_id);
            }
            return false;
        });
        $(".points_block").each(function(){
            var c = $(this).find(".point").length;
            var that = $(this);
            $(this).hide();
            var link = $("<a href='#' class='inline'></a>");
            link.text("Пунктов самовывоза: "+c);
            link.click(function(){that.show(); $(this).hide(); return false});
            $(this).before(link);
        });
        $(".delete_point").live('click', function(){
            var point = $(this).parents(".point");
            point.remove();
            return false;
        });
    });
</script>
{/literal}